{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Umpire Panel</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container py-4">

  <h1>Umpire Panel</h1>

  <form method="get" class="mb-4">
    <label for="game_id" class="form-label">Select Game:</label>
    <select name="game_id" id="game_id" class="form-select" onchange="this.form.submit()">
      <option value="">-- Choose a game --</option>
      {% for game in games %}
        <option value="{{ game.id }}" {% if selected_game and game.id == selected_game.id %}selected{% endif %}>
          Game {{ game.id }}
        </option>
      {% endfor %}
    </select>
  </form>

  {% if selected_game %}
    <h3>Turn {{ turn.number }}</h3>

    <form method="post">
      {% csrf_token %}

      <h4>Red Team (Play 3 Attack Cards)</h4>
      {% for i in "123"|make_list %}
        <select name="attack_card_{{ i }}" class="form-select mb-2">
          <option value="">-- Choose card {{ i }} --</option>
          {% for card in attack_cards %}
            <option value="{{ card.id }}">{{ card.name }} ({{ card.card_type }})</option>
          {% endfor %}
        </select>
      {% endfor %}

      <h4 class="mt-4">Blue Team (Budget: {{ budget }})</h4>
      {% for card in defense_cards %}
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="defense_cards" value="{{ card.id }}" id="card{{ card.id }}">
          <label class="form-check-label" for="card{{ card.id }}">
            {{ card.name }} (Cost: {{ card.cost }})
          </label>
        </div>
      {% endfor %}

      <button type="submit" class="btn btn-primary mt-4">Submit Turn</button>
    </form>
  {% endif %}

</body>
</html>
